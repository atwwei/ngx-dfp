{"version":3,"file":"dfp-audience-pixel.directive.js","sourceRoot":"","sources":["../../src/directive/dfp-audience-pixel.directive.ts"],"names":[],"mappings":";;AAAA,sCAMuB;AACvB,0CAAoD;AAEpD;IASE,mCAC+B,UAAkB,EACvC,UAAsB;QADD,eAAU,GAAV,UAAU,CAAQ;QACvC,eAAU,GAAV,UAAU,CAAY;IAC5B,CAAC;IAEL,4CAAQ,GAAR;QACE,EAAE,CAAC,CAAC,0BAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACvC,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,EACxB,MAAM,GAAG,IAAI,GAAG,cAAc,CAAC;YAEjC,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChB,MAAM,GAAG,WAAS,IAAI,CAAC,MAAQ,CAAC;YAClC,CAAC;YAED,IAAI,IAAI,GAAG,EAAE,CAAC;YACd,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBACd,IAAI,GAAG,UAAQ,IAAI,CAAC,IAAM,CAAC;YAC7B,CAAC;YAED,IAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAE5C,KAAK,CAAC,GAAG,GAAG,gDAAgD,CAAC;YAC7D,KAAK,CAAC,GAAG,IAAO,MAAM,gBAAW,IAAI,CAAC,SAAS,SAAI,MAAM,GAAG,IAAM,CAAC;YAEnE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;YAChB,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YACjB,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC;YAEnB,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;YAElC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC;IACH,CAAC;;gBA1CF,gBAAS,SAAC;oBACT,QAAQ,EAAE,oBAAoB;iBAC/B;;;;gBAQ4C,MAAM,uBAA9C,aAAM,SAAC,kBAAW;gBAlBV,iBAAU;;;yBAapB,YAAK;4BACL,YAAK;uBACL,YAAK;;IAoCR,gCAAC;CAAA,AA3CD,IA2CC;AAxCY,8DAAyB","sourcesContent":["import {\n  Directive, ElementRef,\n  Input,\n  OnInit,\n  Inject,\n  PLATFORM_ID\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Directive({\n  selector: 'dfp-audience-pixel'\n})\nexport class DfpAudiencePixelDirective implements OnInit {\n\n  @Input() adUnit: string;\n  @Input() segmentId: number;\n  @Input() ppid: number;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: Object,\n    private elementRef: ElementRef\n  ) { }\n\n  ngOnInit() {\n    if (isPlatformBrowser(this.platformId)) {\n      const axel = Math.random(),\n        random = axel * 10000000000000;\n\n      let adUnit = '';\n      if (this.adUnit) {\n        adUnit = `dc_iu=${this.adUnit}`;\n      }\n\n      let ppid = '';\n      if (this.ppid) {\n        ppid = `ppid=${this.ppid}`;\n      }\n\n      const pixel = document.createElement('img');\n\n      pixel.src = 'https://pubads.g.doubleclick.net/activity;ord=';\n      pixel.src += `${random};dc_seg=${this.segmentId};${adUnit}${ppid}`;\n\n      pixel.width = 1;\n      pixel.height = 1;\n      pixel.border = '0';\n\n      pixel.style.visibility = 'hidden';\n\n      this.elementRef.nativeElement.append(pixel);\n    }\n  }\n}\n"]}